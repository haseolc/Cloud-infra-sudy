# 🔟 모니터링 & 운영

> 🔵 핵심 요약 (한 줄)
> 
> 
> 모니터링은 **문제가 터지기 전에 이상을 감지**하는 것이고,
> 
> 로깅은 **문제가 터진 후 원인을 추적**하는 것이다.
> 

---

## 1️⃣ 모니터링 vs 로깅

---

### 🧠 비유

- **모니터링** → 심박수·체온 체크 (실시간 상태)
- **로깅** → 병원 진료 기록 (사후 분석)

---

### 📊 차이 정리

| 구분 | 모니터링 | 로깅 |
| --- | --- | --- |
| 목적 | 이상 징후 감지 | 원인 분석 |
| 시점 | 사전 / 실시간 | 사후 |
| 데이터 | 숫자(메트릭) | 텍스트 |
| 도구 | Prometheus | ELK, Loki |

---

### 🧠 핵심 정리

> 운영 = 모니터링 + 로깅
> 
> 
> 둘 중 하나만 있으면 반쪽짜리 운영
> 

---

## 2️⃣ Prometheus

---

### 🧠 한 줄 정의

> Prometheus = 메트릭 수집 서버
> 

---

### 💡 역할

- 서버, 컨테이너, Pod 상태 수집
- CPU, 메모리, 요청 수, 지연 시간 등

---

### 🧩 동작 방식 (중요)

> Pull 방식
> 

```
Prometheus
   ← metrics 제공 (HTTP)
   ← 서버 / 컨테이너 / K8s

```

---

### 🧠 왜 Pull 방식?

- 대상 장애 시 감지 쉬움
- 중앙 집중 관리

---

## 3️⃣ Grafana

---

### 🧠 한 줄 정의

> Grafana = 메트릭 시각화 도구
> 

---

### 💡 역할

- Prometheus 데이터 시각화
- 대시보드 구성
- 운영자 한 눈에 상태 파악

---

### 📊 예시 대시보드

- CPU 사용률
- 메모리 사용량
- 요청 수 / 에러율
- Pod 개수 변화

---

### 🧠 실무 포인트

> “Grafana는 의사 결정용 화면이다”
> 

---

## 4️⃣ 메트릭 (Metrics)

---

### 🧠 정의

> 시스템 상태를 숫자로 표현한 값
> 

---

### 📊 대표 메트릭

| 메트릭 | 의미 |
| --- | --- |
| CPU Usage | 부하 상태 |
| Memory Usage | OOM 위험 |
| Request Count | 트래픽 |
| Error Rate | 장애 징후 |
| Latency | 성능 저하 |

---

### 🧠 핵심

> 로그는 읽고,
> 
> 
> 메트릭은 **본다**
> 

---

## 5️⃣ 알람 개념

---

### 🧠 한 줄 정의

> 알람 = 기준 초과 시 울리는 경고
> 

---

### 📄 예시

- CPU 80% 이상 5분 지속
- 에러율 5% 초과
- Pod 재시작 횟수 급증

---

### 🧠 알람의 목적

- “문제 있다” 알리기
- 자동 대응 트리거

---

### ⚠️ 실무 경고

> 알람 많으면 → 다 무시됨 ❌
> 
> 
> **진짜 위험한 것만 울려야 함**
> 

---

## 6️⃣ 장애 감지 흐름

---

### 🧩 전체 흐름 다이어그램 (텍스트)

```
서비스 이상 발생
   ↓
메트릭 수치 변화
   ↓
Prometheus 수집
   ↓
알람 조건 만족
   ↓
Alert 발생
   ↓
운영자 대응 / 자동 조치

```

---

### 🧠 핵심

> 장애는 “발생”보다
> 
> 
> **“감지까지 걸린 시간”이 더 중요**
> 

---

## 7️⃣ 네 프로젝트에 연결하면

---

### 📦 Kubernetes 기준

| 구성 | 도구 |
| --- | --- |
| 메트릭 수집 | Prometheus |
| 시각화 | Grafana |
| 알람 | Alertmanager |
| 대상 | Pod / Node / Service |

---

### 📄 프로젝트 문장으로 쓰면

> “시스템 상태는 Prometheus로 수집되며,
> 
> 
> Grafana 대시보드를 통해 실시간 모니터링된다.
> 
> 임계치 초과 시 알람을 통해 장애를 조기에 감지한다.”
> 

---

## ✅ 10장 최종 요약

- 모니터링 = 사전 감지
- 로깅 = 사후 분석
- Prometheus = 수집
- Grafana = 시각화
- 알람 = 즉각 대응
