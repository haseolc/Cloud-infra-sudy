# 1️⃣1️⃣ 장애 & 복구 시나리오

> 프로젝트 마무리 단계에서 가장 평가 포인트가 높은 파트
> 

---

## 🔵 한 줄 요약 (면접/발표용)

> 장애는 언제든 발생한다는 전제로 설계해야 하며,
> 
> 
> 복구는 **자동 + 우선순위 기반**으로 이루어져야 한다.
> 

---

## 1️⃣ 컨테이너 장애

---

### 🧠 비유

- **컨테이너 = 음식점 직원**
- 직원 한 명 쓰러짐 ≠ 가게 폐업

---

### 📌 장애 상황

- 프로세스 크래시
- 애플리케이션 예외 종료
- 메모리 초과(OOM)

---

### 🔄 쿠버네티스 대응

- 컨테이너 재시작
- Pod 내부에서 자동 복구

---

### 🧠 핵심 포인트

> 컨테이너 장애는 “사소한 장애”
> 
> 
> → 자동 복구 전제
> 

---

## 2️⃣ Pod 장애

---

### 🧠 비유

- **Pod = 음식점 한 테이블**
- 테이블이 깨지면 새 테이블로 교체

---

### 📌 장애 상황

- Pod 삭제
- 노드와 통신 불가
- 리소스 부족

---

### 🔄 쿠버네티스 대응

- ReplicaSet이 새로운 Pod 생성
- Desired State 유지

---

### 🧠 핵심 포인트

> Pod는 언제든 죽어도 되는 존재
> 

---

## 3️⃣ 서버(Node) 장애

---

### 🧠 비유

- **서버 = 음식점 건물**
- 건물이 무너지면 다른 건물로 손님 이동

---

### 📌 장애 상황

- EC2 다운
- 네트워크 단절
- 디스크 오류

---

### 🔄 쿠버네티스 대응

- 해당 노드에서 Pod 제거
- 다른 노드에 재배치

---

### ⚠️ 전제 조건

- 노드가 **2대 이상**
- 스토리지는 외부화

---

### 🧠 핵심 포인트

> 서버 장애는 설계로 대비
> 

---

## 4️⃣ 데이터 손실

---

### 🧠 비유

- **데이터 = 영업 장부**
- 서버가 살아도 장부가 날아가면 끝

---

### 📌 장애 상황

- 컨테이너 삭제
- 볼륨 손상
- DB 파일 손실

---

### 🔄 대응 전략

| 항목 | 대응 |
| --- | --- |
| 파일 | rsync / tar 백업 |
| DB | dump 백업 |
| 전체 | 스냅샷 |

---

### 🧠 핵심 포인트

> 데이터는 절대 자동 복구 안 됨
> 
> 
> → 백업만이 답
> 

---

## 5️⃣ 복구 우선순위

---

### 🧠 비유

- 병원 응급실 트리아지(분류)

---

### 📊 복구 우선순위 표

| 우선순위 | 대상 | 이유 |
| --- | --- | --- |
| 1 | 서비스 접근성 | 사용자가 먼저 |
| 2 | 데이터 무결성 | 영구 손실 방지 |
| 3 | 애플리케이션 | 기능 복구 |
| 4 | 성능 최적화 | 이후 단계 |

---

### 🧠 핵심 문장

> “모든 걸 동시에 고치려다
> 
> 
> **아무 것도 못 고친다**”
> 

---

## 6️⃣ 전체 장애 → 복구 흐름

```
장애 발생
   ↓
모니터링 감지
   ↓
알람 발생
   ↓
자동 복구 (K8s)
   ↓
백업 복구 (필요 시)
   ↓
정상화

```

---

## 7️⃣ 네 프로젝트에서 이걸 어떻게 쓰면 좋은가

---

### 📄 보고서 문장 예시

> “본 프로젝트는 컨테이너, Pod, 서버 단위 장애에 대해
> 
> 
> Kubernetes의 Self-healing 메커니즘으로 자동 복구를 수행하며,
> 
> 데이터 손실에 대비하여 정기 백업 및 복구 시나리오를 구축하였다.”
> 

---

## 8️⃣ 최종 요약 (진짜 마지막)

- 장애는 피하는 게 아니라 가정한다
- 컨테이너/Pod 장애는 자동 복구
- 서버 장애는 구조로 대비
- 데이터는 백업만이 생명줄
- 복구는 우선순위가 핵심
