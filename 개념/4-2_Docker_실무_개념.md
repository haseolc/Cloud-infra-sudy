# 4️⃣-2️⃣ Docker 실무 개념

## 1️⃣ Dockerfile

---

### 🧾 비유: 요리 레시피 카드

- 어떤 재료를 쓰고
- 어떤 순서로 조리할지

---

### 💻 기술적 정의

> Dockerfile = 이미지를 만드는 설계도
> 
- 사람이 직접 환경 설치 ❌
- 코드로 환경 정의 ✅

---

### 📌 예시

```docker
FROM nginx
COPY index.html /usr/share/nginx/html

```

---

### 🔍 이 프로젝트에서

- nginx 커스터마이징
- 테스트 페이지 생성
- 재현 가능한 이미지

👉 **자동 배포의 기본 단위**

---

## 2️⃣ 컨테이너 실행 옵션

---

### 🎛️ 비유: 가전제품 설정 다이얼

- 소음
- 전력
- 자동 시작

---

### 💻 주요 옵션

| 옵션 | 의미 |
| --- | --- |
| `-d` | 백그라운드 실행 |
| `--name` | 컨테이너 이름 |
| `--restart` | 재시작 정책 |

---

### 📌 예시

```bash
docker run -d --name web --restart always nginx

```

---

### 🔍 이 프로젝트에서

- 서버 재부팅 후 자동 실행
- 장애 시 자동 복구

👉 **운영 서버 필수 옵션**

---

## 3️⃣ 포트 포워딩

---

### 🚪 비유: 건물 현관과 매장 문 연결

- 밖에서는 80번 문
- 안에서는 8080번 문

---

### 💻 개념

> 외부 포트 → 컨테이너 내부 포트 연결
> 

---

### 📌 예시

```bash
docker run -p 80:80 nginx

```

---

### 🔍 이 프로젝트에서

- 외부 요청 → Nginx
- 컨테이너 직접 노출 최소화

👉 **Reverse Proxy 구조 전 단계**

---

## 4️⃣ Volume / Bind Mount

---

### 🗄️ 비유: 외부 창고

- 컨테이너 꺼져도
- 데이터는 남아 있음

---

### 💻 개념 차이

| 구분 | 설명 |
| --- | --- |
| Volume | Docker 관리 저장소 |
| Bind Mount | 호스트 디렉토리 직접 연결 |

---

### 📌 예시

```bash
docker run -v data:/var/lib/mysql mysql

```

---

### 🔍 이 프로젝트에서

- DB 데이터 영속화
- 웹 문서 백업 대상

👉 **백업의 핵심 대상**

---

## 5️⃣ 컨테이너 데이터 영속성

---

### 💥 왜 문제가 되는가?

- 컨테이너 삭제 = 데이터 삭제

---

### 🧠 해결책

> 데이터는 컨테이너 밖에 둔다
> 
- Volume
- Bind Mount

---

### 🔍 이 프로젝트에서

- nginx 문서
- DB 데이터
- 백업 서버로 복사

👉 **2단계 백업과 직결**

---

# 🧠 4-2단계 핵심 요약

- Dockerfile은 이미지 설계도
- 실행 옵션은 운영 안정성
- 포트 포워딩은 외부 연결 통로
- Volume/Bind Mount는 데이터 생존
- 컨테이너 데이터는 반드시 외부에 저장
