# 1차 프로젝트: 1단계

1. Terraform: 인프라(EC2)를 준비합니다.
2. Ansible: 준비된 EC2에 접속하여 k3s를 설치합니다. (클러스터 구성)
3. GitHub Actions:
    
    Docker 이미지를 빌드하여 Docker Hub에 푸시합니다.
    
    kubectl 명령을 사용하여 k3s 서버에 "이 이미지를 사용하여 파드를 생성해라"라고 명령합니다.
    
4. k3s: 명령을 받으면 직접 Docker Hub에서 이미지를 다운로드하여 파드를 실행합니다.

---

Terraform: VPC, 보안 그룹(6443, 80, 443 포트 등), EC2 인스턴스를 코드로 관리하는 표준적인 방법
-> 생성된 EC2의 IP를 Ansible이 잘 인식할 수 있도록 output 설정을 잘 해두어야 함

GitHub Actions로 도커 이미지 빌드 & 허브 푸시: CI의 핵심이며, Docker Hub를 통해 이미지 저장소를 관리하는 것도 정석

!! Ansible은 서버를 만드는 도구이고, 배포(이미지 가져오기)는 k3s가 한다. !!

Ansible이 이미지를 미리 다운로드 받을 필요가 없는 이유: 이후 k3s가 배포 시점에 자동으로 다운로드 받기 때문에 다운로드 받는 과정이 두 번 수행된다.

=> GitHub Actions에서 ansible-playbook을 실행하여 k3s를 세팅하게 하고, 배포는 kubectl apply -f deployment.yaml 형식을 사용하는 것이 바람직하다.
